---
title: 'Сессии изменений'
---

[Действия](Действия.md) в результате своего выполнения могут изменять состояние системы, в которой они выполняются. Записывать эти изменения сразу в базу данных не всегда желательно, как с точки зрения целостности, так и с точки зрения эргономики системы. Поэтому в платформе существует возможность накапливать эти изменения локально в *сессиях изменений.* 

Изменениями в сессии могут быть изменения [первичных](Первичные_свойства_DATA.md) свойств, в том числе локальных, а также изменения [классов](Пользовательские_классы.md) объектов. Первые осуществляются действиями, созданными при помощи оператора [изменения свойства](Изменение_свойства_CHANGE.md), вторые - при помощи операторов [добавления](Добавление_объектов_NEW.md) / [изменения класса](Изменение_класса_CHANGECLASS_DELETE.md) объектов.

Каждый раз, когда действие выполняется, в зависимости от контекста выполнения для него определяется *текущая* сессия. Например, если действие вызывается как обработчик некоторого события формы (наиболее частый случай), то текущей сессией для него будет сессия этой формы. Также, к примеру, текущая сессия может изменяться при использовании оператора [новой сессии](Создание_сессий_NEWSESSION_NESTEDSESSION.md).

Если действие в процессе выполнения обращается к некоторому свойству, то его значение вычисляется с учетом изменений, сделанных в текущей сессии этого действия.

Для сессии поддерживаются две основные операции - [применение](Применение_изменений_APPLY.md) и [отмена](Отмена_изменений_CANCEL.md)*, *а также набор операторов для [работы с изменениями](Операторы_изменений_SET_CHANGED_....md) (в том числе получением [предыдущего значения](Предыдущее_значение_PREV.md) в сессии).

Отметим, что сессии изменений не является потокобезопасными, поэтому при использовании операторов, которые явно или неявно выполняют действия в новом потоке и при этом не блокируют свой поток выполнения, крайне не рекомендуется обращаться к текущей сессии после их выполнения (например такими "многопоточными" операторами являются операторы [нового потока](Оператор_NEWTHREAD.md) или [асинхронного](В_интерактивном_представлении_SHOW_DIALOG.md#Винтерактивномпредставлении(SHOW,DIALOG-broken)-flow) [открытия формы](В_интерактивном_представлении_SHOW_DIALOG.md)). В этом случае рекомендуется всегда создавать новую сессию.
